// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model  Users { 
  id  String @id @default(uuid())
  email  String? @unique
  name String?
  password String?
  birthday  DateTime @default(now())
  validate  String? 
  createAt DateTime @default(now())
  role  Roles
  childId String?
  parent Users?  @relation("child", fields: [childId], references: [id], onDelete : Cascade)
  student Users[] @relation("child")
  results Results[] 
}

enum Roles {
  parent
  student
  child
}


 model TableContents {
    id  String @id @default(uuid())
    name String @unique
    exercise Exercises[]   
    result Results[]
 }

 model Exercises {
    id  String @id @default(uuid())
    question String @unique
    response String @unique
    contentId String 
    content TableContents @relation(fields: [contentId], references: [id], onDelete : Cascade)

 }

 model Results {
     id  String @id @default(uuid())
     date  DateTime @default(now())
     exam   Boolean
     note Int
     timeRest   String
     content TableContents @relation(fields: [contentID], references: [id], onDelete: Cascade)
     user Users @relation(fields: [userID], references: [id], onDelete: Cascade)
     contentID String
     userID String

 }